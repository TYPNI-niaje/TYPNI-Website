<!DOCTYPE html>
<html lang="en">

<head>
    <!-- ========== Meta Tags ========== -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Typni">

    <!-- ========== Page Title ========== -->
    <title>Contact Us - The Young Peoples Network International</title>

    <!-- ========== Favicon Icon ========== -->
    <link rel="shortcut icon" href="assets/img/favicon.png" type="image/x-icon">

    <!-- ========== Start Stylesheet ========== -->
    <link href="assets/css/bootstrap.min.css" rel="stylesheet" />
    <link href="assets/css/font-awesome.min.css" rel="stylesheet" />
    <link href="assets/css/flaticon-charity-set.css" rel="stylesheet" />
    <link href="assets/css/magnific-popup.css" rel="stylesheet" />
    <link href="assets/css/owl.carousel.min.css" rel="stylesheet" />
    <link href="assets/css/owl.theme.default.min.css" rel="stylesheet" />
    <link href="assets/css/animate.css" rel="stylesheet" />
    <link href="assets/css/bootsnav.css" rel="stylesheet" />
    <link href="style.css" rel="stylesheet">
    <link href="assets/css/responsive.css" rel="stylesheet" />
    <link href="assets/css/modern-preloader.css" rel="stylesheet" />
    <link href="assets/css/modern-enhancements.css" rel="stylesheet" />
    <!-- ========== End Stylesheet ========== -->

    

    <!-- ========== Google Fonts ========== -->
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,600,700,900" rel="stylesheet">

    <!-- ========== Supabase Client ========== -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="utils/globalAuth.js"></script>

</head>

<body>
    <!-- Scroll Progress Indicator -->
    <div class="scroll-indicator" id="scroll-progress"></div>
    

    <!-- Header 
    ============================================= -->
    <div id="header-placeholder"></div>
    <script>
    fetch('assets/components/header.html') // make sure this path is correct
        .then(response => response.text())
        .then(data => {
        document.getElementById('header-placeholder').innerHTML = data;
        });
    </script>
    <!-- End Header-->
    <!--Start Breadcrumb-->
    <div class="breadcrumb-area shadow dark bg-fixed text-center padding-xl text-light" style="background-image: url(assets/img/hero1.jpg);">
        <div class="container">
            <div class="row">
                <div class="col-md-6 col-sm-6 text-left">
                    <h1>Contact Us</h1>
                </div>
                <div class="col-md-6 col-sm-6 text-right">
                    <ul class="breadcrumb">
                        <li><a href="#">Home</a></li>
                        <li><a href="#">Page</a></li>
                        <li class="active">Contact</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- End Breadcrumb -->

    <!-- Start Contact 
    ============================================= -->
    <div class="contact-form-area default-padding">
        <div class="container">
            <div class="row">
                <!-- Start Contact Form -->
                <div class="col-md-7 contact-form">
                    <div class="content">
                        <div class="heading">
                            <h3>Let's make the world better, together</h3>
                        </div>
                        <form id="contact-form" class="contact-form">
                            <div class="col-md-12">
                                <div class="row">
                                    <div class="form-group">
                                        <input class="form-control" id="name" name="name" placeholder="Name" type="text" required>
                                        <span class="alert-error"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="row">
                                    <div class="form-group">
                                        <input class="form-control" id="email" name="email" placeholder="Email*" type="email" required>
                                        <span class="alert-error"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="row">
                                    <div class="form-group">
                                        <input class="form-control" id="phone" name="phone" placeholder="Phone" type="text">
                                        <span class="alert-error"></span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="row">
                                    <div class="form-group comments">
                                        <textarea class="form-control" id="comments" name="comments" placeholder="Your message *" required></textarea>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-12">
                                <div class="row">
                                    <button type="submit" name="submit" id="submit">
                                        Send Message <i class="fa fa-paper-plane"></i>
                                        <span id="loading-spinner" class="hidden">
                                            <i class="fa fa-spinner fa-spin ml-1"></i>
                                        </span>
                                    </button>
                                </div>
                            </div>
                            <!-- Alert Message -->
                            <div class="col-md-12 alert-notification">
                                <div id="message" class="alert-msg"></div>
                            </div>
                        </form>
                        
                        <!-- Success Notification -->
                        <div id="notification" class="notification">
                            <i class="fa fa-check-circle"></i>
                            <span class="message"></span>
                        </div>
                        
                        <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
                        <script>
                            const SUPABASE_URL = 'https://lkgqmfqtxpbvwrsguwka.supabase.co';
                            const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImxrZ3FtZnF0eHBidndyc2d1d2thIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDc1ODk1MjYsImV4cCI6MjA2MzE2NTUyNn0.bMKMVLW-dwVDfhXFIBr-dxbB9yFZ-isNb5v2VrjoqQA';
                            const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
                            
                            // Function to show notification
                            function showNotification(message, isSuccess = true) {
                                const notification = document.getElementById('notification');
                                const icon = notification.querySelector('i');
                                const messageSpan = notification.querySelector('.message');
                                
                                // Set icon and message
                                icon.className = isSuccess ? 'fa fa-check-circle' : 'fa fa-times-circle';
                                messageSpan.textContent = message;
                                
                                // Show notification
                                notification.classList.add('show');
                                
                                // Hide after 5 seconds
                                setTimeout(() => {
                                    notification.classList.add('fade-out');
                                    setTimeout(() => {
                                        notification.classList.remove('show', 'fade-out');
                                    }, 400);
                                }, 5000);
                            }
                            
                            document.getElementById('contact-form').addEventListener('submit', async function(e) {
                                e.preventDefault();
                                
                                const submitBtn = document.getElementById('submit');
                                const loadingSpinner = document.getElementById('loading-spinner');
                                const messageDiv = document.getElementById('message');
                                
                                // Show loading state
                                submitBtn.disabled = true;
                                loadingSpinner.classList.remove('hidden');
                                messageDiv.innerHTML = ''; // Clear any previous messages
                                
                                try {
                                    const formData = {
                                        name: document.getElementById('name').value,
                                        email: document.getElementById('email').value,
                                        phone: document.getElementById('phone').value,
                                        message: document.getElementById('comments').value
                                    };
                                    
                                    const { error } = await supabase
                                        .from('contact_messages')
                                        .insert([formData]);
                                    
                                    if (error) throw error;
                                    
                                    // Show success notification
                                    showNotification('Message sent successfully! We will get back to you soon.');
                                    
                                    // Clear form
                                    this.reset();
                                    
                                } catch (error) {
                                    console.error('Error:', error);
                                    showNotification('Failed to send message. Please try again later.', false);
                                } finally {
                                    // Hide loading state
                                    submitBtn.disabled = false;
                                    loadingSpinner.classList.add('hidden');
                                }
                            });
                        </script>
                    </div>
                </div>
                <!-- End Contact Form -->
                <div class="col-md-5 address-info text-center">
                    <ul>
                        <li>
                            <i class="fas fa-map-marker-alt"></i>
                            <p>
                                Our Location
                                <span>Nairobi, Kenya</span>
                            </p>
                        </li>
                        <li>
                            <i class="fas fa-envelope-open"></i>
                            <p>
                                Send Us Mail
                                <span>Info@typni.com</span>
                            </p>
                        </li>
                        <li>
                            <i class="fas fa-mobile-alt"></i>
                            <p>
                                Call Us
                                <span>+254 758272146</span>
                            </p>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <!-- End Contact -->

    <!-- Start Maps Area 
    ============================================= -->
    <div class="maps-area-items">
        <div class="maps-box oh">
            <div class="google-maps">
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d510564.65107988653!2d36.5177334104462!3d-1.3031873859975642!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x182f1172d84d49a7%3A0xf7cf0254b297924c!2sNairobi!5e0!3m2!1sen!2ske!4v1739946324315!5m2!1sen!2ske" width="600" height="450" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
        </div>
    </div>
    <!-- End Maps Area -->

    <!-- Start Footer 
    ============================================= -->
    <div id="footer-placeholder"></div>
    <script>
    fetch('assets/components/footer.html') // make sure this path is correct
        .then(response => response.text())
        .then(data => {
        document.getElementById('footer-placeholder').innerHTML = data;
        });
    </script>
    <!-- End Footer -->

    <!-- jQuery Frameworks
    ============================================= -->
    <script src="assets/js/jquery-1.12.4.min.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/equal-height.min.js"></script>
    <script src="assets/js/jquery.appear.js"></script>
    <script src="assets/js/jquery.easing.min.js"></script>
    <script src="assets/js/jquery.magnific-popup.min.js"></script>
    <script src="assets/js/progress-bar.min.js"></script>
    <script src="assets/js/modernizr.custom.13711.js"></script>
    <script src="assets/js/owl.carousel.min.js"></script>
    <script src="assets/js/wow.min.js"></script>
    <script src="assets/js/isotope.pkgd.min.js"></script>
    <script src="assets/js/imagesloaded.pkgd.min.js"></script>
    <script src="assets/js/count-to.js"></script>
    <script src="assets/js/bootsnav.js"></script>
    <script src="assets/js/YTPlayer.min.js"></script>
    <script src="assets/js/main.js"></script>
    <script src="assets/js/modern-preloader.js"></script>
    <script src="assets/js/modern-scroll-animations.js"></script>

</body>
</html>